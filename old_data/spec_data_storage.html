<span style="font-family: courier new;">STX STX message_number[3byte] message_type[3byte] data CRC ETB</span><br style="font-family: courier new;"><br style="font-family: courier new;"><span style="font-family: courier new;">Escape Zeichen: ESC (0x1B)</span><br style="font-family: courier new;"><span style="font-family: courier new;">Start of Header: STX (0x01)</span><br style="font-family: courier new;"><span style="font-family: courier new;">End of Transmission Block: ETB (0x17)</span><br><br>CRC = CRC-8 mit 0x0107 als Generatorpolynom<br><br>Sende-Stack: Nachricht -&gt; Prüfsumme -&gt; Escapen -&gt; Rahmen -&gt; Senden<br>Empfangs-Stack: Empfangen -&gt; Unescapen -&gt; Rahmen -&gt; Prüfsumme -&gt; Nachricht<br><br>Werte sind big-endian (0x1234 wird übertragen als 0x12, 0x34).<br><br>Vor der Übertragung wird zu den Parametern 2147483648 addiert (2^32 / 2), dadurch wird beispi<font color="000000">elsweise 0 als 21474836<span style="color: rgb(153, 51, 0);">48</span> </font><font color="000000">übertragen, +10 als 21474836<span style="color: rgb(153, 51, 0);">58</span> </font><font color="000000">und -10 als 21474836<span style="color: rgb(153, 51, 0);">38</span></font><font color="000000">.</font><br>Ich hab das nochmal geändert von 2^24 auf 2^32, weil der Vorteil durch die 24 Bit nicht so groß ist, wie ich gedacht habe.<br><br>Eine ProxyMessage ist so aufgebaut:<br>&lt;Nachrichtennummer&gt;&lt;Typ der ProxyMessage&gt;&lt;Länge der Daten&gt;&lt;Typ der inneren Nachricht&gt;&lt;Daten der inneren Nachricht&gt;&lt;Prüfsumme über diese Felder&gt;<br>Dabei ist zu beachten: Das Zeug der inneren Nachricht wird NICHT doppelt escapet<br><br>